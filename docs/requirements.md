# 要件定義書（全文）
## X（旧Twitter）AIトレンド自動収集・編集・収益化システム

---

## 1. 前提（Prerequisite）

### 1.1 ビジネス前提

本システムは、AI分野における X（旧Twitter）の注目投稿を毎日自動収集し、編集価値を付加してVIPコミュニティへ提供することを目的とする。

コミュニティには以下の2階層が存在し、情報の深さ・編集度・先行性によって明確な差別化を行う：
- 一般会員
- 有料VIP会員

収集した情報は以下に再利用される：
- Discord（一般／VIP）
- Notion（知的整理・アーカイブ）
- note（無料／有料）
- Kindle（週刊雑誌型）
- YouTube（解説動画）

### 1.2 技術前提

- X公式APIを利用する
- 定期実行は cron / scheduler により行う
- データの一次保存先は Googleスプレッドシートとする
- LLM（Claude / GPT）を利用し、要約・評価・記事生成を行う
- Claude Code 上での実装を前提とし、外部UIは持たない

---

## 2. 目的（Objective）

### 2.1 システム目的

- 毎日、AI関連のX投稿を自動取得し、ノイズを除去した上で「見るべき投稿」だけを抽出
- 人の判断を必要としないスコアリング＋意味評価による編集
- VIP会員に対し以下のコストを限りなくゼロに近づける：
  - 情報取得コスト
  - 判断コスト
  - 編集コスト

### 2.2 成果物

#### 日次
- 約200件の投稿データ（スコア付き）
- VIP向け「今日の重要投稿2件」

#### 週次
- 有料note 最大2本（480円）
- 週刊Kindle原稿（50〜100ページ）
- YouTube動画台本

---

## 3. 対象範囲（Scope）

### 含むもの
- X投稿の取得・評価・分類
- note記事生成（無料／有料）
- Kindle原稿生成
- Discord自動投稿
- Notion連携

### 含まないもの
- note / Kindle / YouTube への自動投稿（下書き生成まで）
- 管理画面UI

---

## 4. 作業フロー（Workflow）

### 4.1 日次フロー（毎日 24:00）

1. X APIより当日の投稿を取得
   - AI関連キーワード（10個）
   - 優先インフルエンサーの全投稿
2. 重複排除（tweet_id単位）
3. スコアリング実行
4. Googleスプレッドシートへ保存
5. Notion DBへ同期
6. 当日の重要投稿2件を選定
7. Discordへ自動投稿
   - 一般向け：トレンド要約
   - VIP向け：重要投稿＋編集解説

### 4.2 週次フロー（固定曜日）

1. 1週間分のデータを集約
2. 有料note候補 最大2本を選定
3. note記事生成（480円）
4. Kindle週刊原稿を生成
5. YouTube台本を生成
6. Discordで週刊告知

---

## 5. 優先インフルエンサー定義

以下のアカウントはバズ条件に関係なく必ず取得する。

```
@SuguruKun_ai
@taishiyade
@ceo_tommy1
@rute1203d
@The_AGI_WAY
@unikoukokun
@kamui_qai
```

- 1日複数投稿があれば全件取得
- priorityフラグを付与

---

## 6. バズ判定・評価ロジック

### 6.1 使用指標

- like / repost / reply
- impressions（取得可能な場合）
- follower_count
- 投稿からの経過時間

### 6.2 スコア定義

#### Base Score
```
(like*1.0 + repost*2.0 + reply*1.5) / log10(follower_count + 10)
```

#### Velocity Score
```
(like + repost*2) / hours_since_post / log10(follower_count + 10)
```

#### Efficiency Score
```
impressions / follower_count
（代替：反応数 / follower）
```

#### Semantic Score（LLM）
- 技術的新規性
- 実務価値
- 話題性
- 保存価値
- 議論性
（0–100）

### 6.3 総合スコア
```
final_score =
  (base * 0.25)
  + (velocity * 0.25)
  + (efficiency * 0.25)
  + (semantic * 0.25)

priority_account → +15
```

---

## 7. note無料／有料ルール

- 週あたり有料記事：最大2本
- 価格：480円固定
- 有料条件
  - 再現性がある
  - 時間／お金の価値が明確
- それ以外は無料記事とする

---

## 8. データ管理（Spreadsheet / Notion）

### Googleスプレッドシート
- 1日1シート
- 投稿データ／スコア／note／Kindle管理列を保持

### Notion
- DBは1つ
- Viewで VIP／一般 を切り分け
- 有料note・Kindle収録管理を行う

---

## 9. Kindle週刊仕様

### 雑誌型構成
- 有料note 2本を核に再編集
- 構成固定
  1. 巻頭言
  2. 最重要特集
  3. ニュースダイジェスト
  4. インフルエンサー視点
  5. 実務ヒント
  6. 予測・CTA

---

## 10. Discord配信仕様

### 日次
- 一般：トレンド要約
- VIP：重要投稿2件＋編集コメント

### 週次
- Kindle公開告知
- 自動投稿のみ（失敗時は再送しない）

---

## 11. エラー・例外設計

- X API制限 → 前日データ再利用 or スキップ
- 取得0件 → Discord通知のみ
- LLM失敗 → 再試行1回 → スキップ

---

## 12. 実装ルール（Claude Code向け）

- 各処理は独立関数／独立ファイル
- 設定値（価格・本数・重み）は config.json で管理
- APIキーは .env
- 再実行耐性（同日二重処理防止）必須

---

## 13. note記事生成ワークフロー

### Step 1: 記事タイプ・テーマ・誘導先ヒアリング
1. 記事タイプを確認（a.有料販売記事／b.無料教育記事／c.誘導用記事）
2. 誘導記事の場合は誘導先URLをヒアリング
3. 記事テーマ・ゴール・添付ファイル・販売希望文字数をヒアリング

### Step 2: 文字数・ターゲット・構成案の提案
- 最適な文字数（7000/10000/12000/15000字）を提案
- ターゲットインサイトを分析
- インサイト訴求型構成テンプレートを3案作成

### Step 3: 詳細目次構成案の作成
- PASCAL 6要素入りの詳細目次を設計
- 各章でターゲット心理と添付ファイル情報を活用

### Step 4: 記事本文の分割執筆
- 論理的3分割で執筆
- 各部執筆後ごとにフィードバックを得る

### Step 5: 全体推敲・note形式整形
- 3パートを統合・推敲
- note向け最適レイアウト（改行・太字・箇条書き等）で最終稿作成

### Step 6: クロスメディア展開戦略の提案
- Threads・Kindle出版・GPTs化の3展開戦略を提案

---

## 14. コピーライティング原則

### 基本原則
- 読者の「無意識」を動かす設計（95％は無意識決断）
- 事実×感情を同時刺激する具体的ストーリー
- WIIFM法則（What's In It For Me?）で読者視点の価値を明示

### 心理技術・影響力
- 影響力6原則：社会的証明・好意・権威・返報性・一貫性・希少性
- 恐怖・損失回避の活用：「買わないと失う」「最悪の未来」を示す
- バンドワゴン効果：「他も選んでいる」「実績」強調

### クロージング技術
- 損失・緊急性を自然に訴求（「今やらないと損」「限定」）
- オファー明確化：明確な提案・行動手順で迷いゼロへ
- 反論・迷いの先回り：Q&Aで不安解消

### ストーリーテリング
- SB7/PASCAL型構成（主人公＝顧客、問題提起、導き手、計画、行動喚起、成功・失敗のイメージ）
- 主人公は読者。「自分ごと物語」で共感・記憶・拡散率UP

---

## 15. 本要件定義のゴール

- Claude Codeにそのまま投入可能
- Webディレクター／開発者が質問せず着手できる
- 後からSaaS化・チーム運用が可能な構造
